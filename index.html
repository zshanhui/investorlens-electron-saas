<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self' https://cdn.jsdelivr.net; script-src 'self' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stock Research</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <div class="app">
    <header class="header">
      <div class="header-main">
        <div>
          <h1 data-i18n="app.title">InvestorLens</h1>
          <p class="subtitle" data-i18n="app.subtitle">Built by WuweiLabs ¬∑ Powered by FMP &amp; Yahoo Finance data</p>
        </div>
        <div class="header-actions">
          <select id="langSwitch" class="lang-switch" aria-label="Language">
            <option value="en">EN</option>
            <option value="zh">‰∏≠Êñá</option>
          </select>
          <button type="button" id="themeToggle" class="theme-toggle" data-i18n-aria-label="app.themeToggleAria"
            aria-label="Toggle light/dark mode">
            Dark mode
          </button>
        </div>
      </div>
      <div class="search-bar">
        <input type="text" id="searchInput" data-i18n-placeholder="search.placeholder"
          placeholder="Search symbol or company (e.g. AAPL, Apple)" autocomplete="off" />
        <button type="button" id="searchBtn" data-i18n="search.btn">Search</button>
      </div>

      <section class="quick-tiles" data-i18n-aria-label="quick.ariaNasdaq" aria-label="Top NASDAQ tech companies">
        <h2 class="quick-title" data-i18n="quick.topNasdaq">Top NASDAQ Tech</h2>
        <div class="quick-grid" id="nasdaqQuickGrid"></div>
      </section>

      <section class="quick-tiles" data-i18n-aria-label="quick.ariaEtfs" aria-label="Popular index ETFs">
        <h2 class="quick-title" data-i18n="quick.majorEtfs">Major Index ETFs</h2>
        <div class="quick-grid" id="etfQuickGrid"></div>
      </section>
    </header>

    <main class="main">
      <section class="results-section" id="resultsSection">
        <h2 data-i18n="results.title">Search Results</h2>
        <div id="resultsList" class="results-list"></div>
        <p id="resultsHint" class="hint" data-i18n="results.hint">Enter a symbol or company name and click Search.</p>
      </section>

      <section class="detail-section" id="detailSection">
        <div class="detail-header">
          <h2 data-i18n="detail.title">Details</h2>
          <button type="button" id="openAlertsScreenBtn" class="detail-alerts-btn" aria-label="Create price alert">
            üîî
          </button>
        </div>

        <div class="detail-tabs" role="tablist">
          <button id="tabQuote" class="detail-tab active" type="button" data-i18n="detail.tabQuote">Quote &amp;
            History</button>
          <button id="tabFinancials" class="detail-tab detail-tab-stock" type="button"
            data-i18n="detail.tabFinancials">Financials</button>
          <button id="tabEdgar" class="detail-tab detail-tab-stock" type="button" data-i18n="detail.tabEdgar">SEC
            Filings</button>
          <button id="tabEtf" class="detail-tab detail-tab-etf hidden" type="button"
            data-i18n="detail.tabEtf">ETF</button>
        </div>

        <div id="alertsScreen" class="alerts-screen hidden" role="tabpanel" aria-label="Create price alerts">
          <div class="alerts-screen-header">
            <button type="button" id="alertsBackBtn" class="alerts-back-btn">
              ‚Üê <span data-i18n="alerts.backToDetails">Back to details</span>
            </button>
            <h3 class="alerts-screen-title" data-i18n="alerts.title">Price alerts</h3>
          </div>
          <div class="alerts-section alerts-section-symbol">
            <div class="alerts-form">
              <label class="alerts-field">
                <span data-i18n="alerts.conditionLabel">When price is</span>
                <select id="alertCondition" class="alerts-select">
                  <option value="above" data-i18n="alerts.above">Above</option>
                  <option value="below" data-i18n="alerts.below">Below</option>
                </select>
              </label>
              <label class="alerts-field">
                <span data-i18n="alerts.priceLabel">Target price</span>
                <input type="number" step="0.01" id="alertPrice" class="alerts-input" placeholder="e.g. 150" />
              </label>
              <button type="button" id="alertCreateBtn" class="alerts-create-btn" data-i18n="alerts.create">
                Set alert
              </button>
            </div>
            <div id="alertsList" class="alerts-list"></div>
          </div>

          <div class="alerts-section alerts-section-all">
            <h4 class="alerts-subtitle" data-i18n="alerts.myAlertsTitle">My alerts</h4>
            <div id="allAlertsList" class="alerts-list alerts-list-all"></div>
          </div>
        </div>

        <div id="quotePanel" class="quote-panel hidden" role="tabpanel" aria-labelledby="tabQuote">
          <div class="quote-header">
            <span id="quoteSymbol" class="symbol"></span>
            <span id="quoteName" class="name"></span>
          </div>
          <div class="quote-price-row">
            <span id="quotePrice" class="price"></span>
            <span id="quoteChange" class="change"></span>
          </div>
          <div id="historyChartContainer" class="history-chart-container">
            <h3 class="history-chart-title">
              <span data-i18n="quote.priceHistory">Price History (1Y)</span>
              <span id="quoteUpdated" class="quote-updated"></span>
            </h3>
            <div id="historyChart" class="history-chart"></div>
          </div>
          <div class="quote-section">
            <h3 class="quote-section-title" data-i18n="quote.valuation">Valuation</h3>
            <div class="quote-meta" id="quoteValuation"></div>
          </div>
          <div class="quote-section">
            <h3 class="quote-section-title" data-i18n="quote.movement">Movement trends</h3>
            <div class="quote-meta" id="quoteMovement"></div>
          </div>
          <div class="historical-section">
            <h3 data-i18n="quote.recentHistory">Recent History</h3>
            <div id="historyTableWrap" class="table-wrap">
              <table id="historyTable">
                <thead>
                  <tr>
                    <th data-i18n="history.date">Date</th>
                    <th data-i18n="history.open">Open</th>
                    <th data-i18n="history.high">High</th>
                    <th data-i18n="history.low">Low</th>
                    <th data-i18n="history.close">Close</th>
                    <th data-i18n="history.volume">Volume</th>
                  </tr>
                </thead>
                <tbody id="historyBody"></tbody>
              </table>
            </div>
          </div>
        </div>

        <div id="financialsPanel" class="financials-panel hidden" role="tabpanel" aria-labelledby="tabFinancials">
          <h3 data-i18n="financials.title">Financial Statements</h3>
          <p id="financialsStatus" class="hint" data-i18n="financials.hint">Financials will load when you select a
            symbol.</p>

          <div class="financials-subtabs">
            <button id="subtabIncome" class="detail-subtab active" type="button"
              data-i18n="financials.incomeStatement">Income Statement</button>
            <button id="subtabBalance" class="detail-subtab" type="button" data-i18n="financials.balanceSheet">Balance
              Sheet</button>
          </div>

          <div id="incomeTableWrap" class="table-wrap">
            <table id="incomeTable">
              <thead id="incomeHead"></thead>
              <tbody id="incomeBody"></tbody>
            </table>
          </div>

          <div id="balanceTableWrap" class="table-wrap hidden">
            <table id="balanceTable">
              <thead id="balanceHead"></thead>
              <tbody id="balanceBody"></tbody>
            </table>
          </div>
        </div>

        <div id="etfPanel" class="etf-panel hidden" role="tabpanel" aria-labelledby="tabEtf">
          <h3 data-i18n="etf.title">ETF Details</h3>
          <p id="etfStatus" class="hint" data-i18n="etf.hint">ETF data will load when you open this tab.</p>
          <div id="etfExpenseSection" class="etf-section hidden">
            <h4 class="etf-section-title" data-i18n="etf.expenseRatio">Expense ratio</h4>
            <p id="etfExpenseValue" class="etf-value"></p>
          </div>
          <div id="etfHoldingsSection" class="etf-section hidden">
            <h4 class="etf-section-title" data-i18n="etf.topHoldings">Top holdings</h4>
            <div id="etfHoldingsList" class="etf-holdings-list"></div>
          </div>
          <div id="etfComingSoon" class="etf-coming-soon hidden">
            <p data-i18n="etf.comingSoon">More ETF data coming soon.</p>
          </div>
        </div>

        <div id="edgarPanel" class="edgar-panel hidden" role="tabpanel" aria-labelledby="tabEdgar">
          <h3 data-i18n="edgar.title">SEC EDGAR Filings</h3>
          <p id="edgarHint" class="hint" data-i18n="edgar.hint">Search for a U.S. public company by ticker or name to
            list SEC filings and download PDFs.</p>
          <div class="edgar-search-bar">
            <input type="text" id="edgarSearchInput" data-i18n-placeholder="edgar.searchPlaceholder"
              placeholder="Ticker or company name (e.g. AAPL, Apple)" autocomplete="off" />
            <button type="button" id="edgarSearchBtn" data-i18n="edgar.searchBtn">Search EDGAR</button>
          </div>
          <div class="edgar-cache-info">
            <span class="edgar-cache-label" data-i18n="edgar.lastFetchedLabel">Last fetched:</span>
            <span id="edgarLastFetched" class="edgar-cache-value">‚Äî</span>
            <button type="button" id="edgarRefreshBtn" class="edgar-refresh-btn" data-i18n="edgar.refresh">
              Refresh from SEC
            </button>
          </div>
          <div id="edgarCompanyList" class="edgar-company-list hidden"></div>
          <div id="edgarSelectedCompany" class="edgar-selected hidden"></div>
          <div class="edgar-form-filter">
            <label data-i18n="edgar.formTypes">Form types:</label>
            <select id="edgarFormFilter">
              <option value="10-K,10-Q" data-i18n="edgar.form10K10Q">10-K, 10-Q</option>
              <option value="10-K" data-i18n="edgar.form10K">10-K only</option>
              <option value="10-Q" data-i18n="edgar.form10Q">10-Q only</option>
              <option value="" data-i18n="edgar.formAll">All filings</option>
            </select>
          </div>
          <div id="edgarFilingsWrap" class="table-wrap hidden">
            <table id="edgarFilingsTable">
              <thead>
                <tr>
                  <th data-i18n="edgar.tableDate">Date</th>
                  <th data-i18n="edgar.tableForm">Form</th>
                  <th data-i18n="edgar.tableReportDate">Report date</th>
                  <th data-i18n="edgar.tableDescription">Description</th>
                  <th data-i18n="edgar.tableAction">Action</th>
                </tr>
              </thead>
              <tbody id="edgarFilingsBody"></tbody>
            </table>
          </div>
          <p id="edgarFilingsHint" class="hint hidden" data-i18n="edgar.selectCompanyHint">Select a company to see
            filings.</p>
        </div>

        <p id="detailHint" class="hint" data-i18n="detail.selectHint">Select a symbol from search results to view
          details.</p>
      </section>
    </main>

    <div id="loading" class="loading hidden" data-i18n="loading.text">Loading‚Ä¶</div>
    <div id="error" class="error hidden"></div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <script src="i18n.js"></script>
  <script src="js/dom.js"></script>
  <script src="js/quick-tiles.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/chart.js"></script>
  <script src="js/edgar.js"></script>
  <script src="js/alerts.js"></script>
  <script src="js/renderer.js"></script>
</body>

</html>